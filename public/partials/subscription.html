<div class="page-header">
  <h1>Inscription</h1>
</div>

<div ng-show="state.success" class="alert alert-warning" role="alert"><i class="fa fa-exclamation-circle"></i> {{data.message}}</div>
<div ng-show="state.error" class="alert alert-danger" role="alert"><i class="fa fa-exclamation-triangle"></i> {{data.message}}</div>
<div ng-show="state.loading" class="progress progress-striped active">
  <div class="progress-bar progress-bar-loading">
    Chargement
  </div>
</div>

<form class="form-horizontal" name="form" ng-submit="submitForm(form.$valid)" ng-hide="state.submitted" novalidate>

  <div class="form-group">
    <label for="username" class="col-sm-4 col-md-3 col-lg-2 control-label">Nom d'utilisateur</label>
    <div class="col-sm-8 col-md-9 col-lg-10 control-label-hidden" ng-class="{ 'has-error' : form.username.$invalid && form.username.$dirty }">
      <input type="text" name="username" id="username" ng-model="user.username" class="form-control" placeholder="Saisissez votre nom d'utilisateur (username ou gamertag qui vous représente)" required>
      <label for="username" class="control-label">Vous devez saisir un nom d'utilisateur.</label>
    </div>
  </div>

  <div class="form-group">
    <label for="firstname" class="col-sm-4 col-md-3 col-lg-2 control-label">Prénom</label>
    <div class="col-sm-8 col-md-9 col-lg-10 control-label-hidden" ng-class="{ 'has-error' : form.firstname.$invalid && form.firstname.$dirty }">
      <input type="text" name="firstname" id="firstname" ng-model="user.firstname" class="form-control" placeholder="Saisissez votre prénom" required>
      <label for="firstname" class="control-label">Vous devez saisir un prénom.</label>
    </div>
  </div>

  <div class="form-group">
    <label for="lastname" class="col-sm-4 col-md-3 col-lg-2 control-label">Nom</label>
    <div class="col-sm-8 col-md-9 col-lg-10 control-label-hidden" ng-class="{ 'has-error' : form.lastname.$invalid && form.lastname.$dirty }">
      <input type="text" name="lastname" id="lastname" ng-model="user.lastname" class="form-control" placeholder="Saisissez votre nom" required>
      <label for="lastname" class="control-label">Vous devez saisir un nom.</label>
    </div>
  </div>

  <div class="form-group">
    <label for="email" class="col-sm-4 col-md-3 col-lg-2 control-label">Courriel</label>
    <div class="col-sm-8 col-md-9 col-lg-10 control-label-hidden" ng-class="{ 'has-error' : form.email.$invalid && form.email.$dirty }">
      <input type="email" name="email" id="email" ng-model="user.email" class="form-control" placeholder="Saisissez votre courriel (un code de confirmation vous y sera envoyé)" required>
      <label for="email" class="control-label">Vous devez saisir une adresse courriel valide.</label>
    </div>
  </div>

  <div class="form-group">
    <label for="phone" class="col-sm-4 col-md-3 col-lg-2 control-label">Numéro de téléphone</label>
    <div class="col-sm-8 col-md-9 col-lg-10 control-label-hidden" ng-class="{ 'has-error' : (form.phone.$invalid || form.phone.$error.pattern) && form.phone.$dirty }">
      <input type="text" name="phone" id="phone" ng-model="user.phone" ng-pattern="/[0-9]{3}-[0-9]{3}-[0-9]{4}/i" class="form-control" placeholder="Saisissez votre numéro de téléphone (requis par les autorités du cégep)" required>
      <label for="phone" class="control-label">Vous devez saisir un numéro de téléphone valide.</label>
    </div>
  </div>

  <div class="form-group">
    <label for="type" class="col-sm-4 col-md-3 col-lg-2 control-label">Type de siège</label>
    <div class="col-sm-8 col-md-9 col-lg-10 control-label-hidden" ng-class="{ 'has-error' : form.type.$invalid && form.type.$dirty }">
      <select type="text" name="type" id="type" ng-model="user.type" class="form-control" required>
        <option value="" disabled>Choisissez votre type de siège (vous pouvez seulement choisir l'un des deux)</option>
        <option value="pc">PC</option>
        <option value="console">Console</option>
      </select>
      <label for="type" class="control-label">Vous devez choisir un type de siège.</label>
    </div>
  </div>

  <div class="form-group">
    <div class="col-sm-offset-4 col-md-offset-3 col-lg-offset-2 col-sm-8 col-md-9 col-lg-10">
      <div class="checkbox">
        <label>
          <input type="checkbox" name="checked" ng-model="checked" ng-init="checked = false">
          J'ai lu et j'accept <a target="_blank" href="/rules">les règles</a> du LAN
        </label>
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="col-sm-offset-4 col-md-offset-3 col-lg-offset-2 col-sm-8 col-md-9 col-lg-10">
      <button type="submit" class="btn btn-primary"
              ng-disabled="!checked || form.email.$invalid || form.lastname.$invalid || form.firstname.$invalid || form.username.$invalid || form.phone.$invalid || form.type.$invalid || state.submitted"
              ng-click="subscribe(user)"><i class="fa fa-pencil"></i> S'inscrire</button>
    </div>
  </div>
</form>
